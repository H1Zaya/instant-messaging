# once
生成的exe可执行文件由于大小原因未能成功上传
对每个文件进行了二次压缩处理


# 即时通讯

1. **需求分析**
   1. 用户(Client)和客户端(Server)在同一局域网内的不同终端上进行双向的通信。
2. **功能分析**
   1. 要具备最基本的信息收发功能。 **done**
   2. TODO
      1. 可以添加文件传输功能。 **done**
3.  **需要有界面**（绿色免安装）



### 所需开发工具

具体实现：qt c++套接字编程 TCP协议

界面设计：qt

绿色可执行文件生成：Enigma Virtual Box



### 具体流程

1. ##### 相关实现类

   1. QTcpServer： 监听连接并建立连接；
   2. QTcpSocket： 套接字通讯

2. ##### 流程分析

   1. **服务器端**：

      1. 创建套接字服务器QTcpServer 对象；
      2. 设置初始端口号；

      3. 通过 QTcpServer 对象设置监听；

      4. 检测是否有客户端连接；

      5. 使用通信的套接字对象 QTcpSocket 和客户端进行通信。

   2. 客户端： 

      1. 创建通信的套接字类 QTcpSocket 对象；
      2. 使用服务器端绑定的 IP 和端口连接服务器 ；
      3. 使用 QTcpSocket 对象和服务器进行通信。

3. ##### 界面分析

   1. 服务器端：
      1. 要有合理的文本输入框；**done**
      2. 要对聊天记录实时展示；**done**
      3. 要对连接状态进行呈现； **done**
         1. 左下角设置连接状态提示（控件显示字符串并随连接状态改变）。
      4. 简洁但体贴； **done**
         1. 在光标锁定在输入文本框时，对键盘事件进行监听，若用户按下回车则发送输入框内容并清空输入框便于重新输入。
      5. 端口号更改。**done**
   2. 客户端（前四点同服务器端）
      1. 要有合理的文本输入框；**done**
      2. 要对聊天记录实时展示；**done**
      3. 要对连接状态进行呈现； **done**
         1. 左下角设置连接状态提示（控件显示字符串并随连接状态改变）。
      4. 简洁但体贴； **done**
         1. 在光标锁定在输入文本框时，对键盘事件进行监听，若用户按下回车则发送输入框内容并清空输入框便于重新输入。
      5. 可供更改的ip地址和端口号。**done**

4. ##### 具体实现（见代码）

5. ##### 将代码封装为绿色.exe文件方便传播使用  **done**

   1. 利用windeployqt指令对release生成的可执行文件进行依赖添加；
   2. 在将依赖添加生成的文件夹内的文件进行压缩；
   3. 具体使用Enigma Virtual Box对可执行文件的文件夹进行压缩操作（注意选择时可以删除可执行文件本身和translation（用于国际化操作））；
   4. 得到具体封装好的绿色可执行文件。

6. ##### 测试  **done**

   1. 在本机上进行消息发送和文件传输；**complete**
   2. 在同一局域网内的两台主机上进行消息发送和文件传输。**complete**

7. **注意**

   文件传输和消息发送分别做成了两个可执行文件，对应服务器也是两个。但核心都一样并且可以在之后的时间内对其进行组装并实现多人聊天的功能。














